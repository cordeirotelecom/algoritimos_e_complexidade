<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üîÄ Plataforma Profissional de Algoritmos de Ordena√ß√£o - Prof. Vagner Cordeiro</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/professional-style.css">
</head>
<body>
  <div class="container">
    <!-- === HEADER PROFISSIONAL === -->
    <div class="header">
      <h1>üîÄ Plataforma Profissional de Algoritmos</h1>
      <h2>Visualiza√ß√£o Interativa e An√°lise T√©cnica Avan√ßada de Algoritmos de Ordena√ß√£o</h2>
      <div class="author">Prof. Vagner Cordeiro | An√°lise de Algoritmos e Complexidade</div>
    </div>
    .controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      padding: 35px;
      border-radius: 20px;
      border: 3px solid rgba(102,126,234,0.2);
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    
    .controls::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
    }
    
    .control-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
    }
    
    .control-group::before {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%);
      border-radius: 15px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }
    
    .control-group:hover::before {
      opacity: 1;
    }
    
    .control-group > * {
      position: relative;
      z-index: 1;
    }
    
    .control-group label {
      font-weight: bold;
      color: #2c3e50;
      font-size: 1em;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .control-group label .emoji {
      font-size: 1.2em;
    }
    
    select, button, input[type=number], input[type=range] {
      font-size: 1em;
      padding: 14px 18px;
      border-radius: 12px;
      border: 2px solid #e9ecef;
      outline: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: inherit;
      font-weight: 500;
    }
    
    select:focus, input:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102,126,234,0.1);
      transform: translateY(-1px);
    }
    
    select {
      cursor: pointer;
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
    }
    
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      border: none;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 6px 20px rgba(102,126,234,0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s ease;
    }
    
    button:hover:not(:disabled)::before {
      left: 100%;
    }
    
    button:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(102,126,234,0.4);
    }
    
    button:active {
      transform: translateY(-1px);
    }
    
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
      box-shadow: 0 2px 8px rgba(102,126,234,0.1);
    }
    
    .speed-control {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .speed-label {
      font-size: 0.85em;
      color: #6c757d;
      min-width: 50px;
      font-weight: 500;
    }
    
    input[type=range] {
      flex: 1;
      height: 8px;
      background: linear-gradient(90deg, #dc3545 0%, #ffc107 50%, #28a745 100%);
      border-radius: 4px;
      padding: 0;
      cursor: pointer;
    }
    
    input[type=range]::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(102,126,234,0.4);
      transition: all 0.3s ease;
    }
    
    input[type=range]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      box-shadow: 0 6px 20px rgba(102,126,234,0.6);
    }
    
    .button-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .button-group button {
      flex: 1;
      min-width: 120px;
    }
    
    .tutorial-mode {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .compare-mode {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .complexity-mode {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .visualization-container {
      margin-bottom: 40px;
      position: relative;
    }
    
    .mode-selector {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .mode-btn {
      padding: 12px 24px;
      border-radius: 25px;
      border: 2px solid rgba(102,126,234,0.3);
      background: rgba(255,255,255,0.1);
      color: #333;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }
    
    .mode-btn.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: #667eea;
    }
    
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 18px;
      margin-bottom: 25px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      padding: 18px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(40,167,69,0.25);
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.6s ease;
    }
    
    .stat-card:hover::before {
      left: 100%;
    }
    
    .stat-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(40,167,69,0.4);
    }
    
    .stat-card.comparisons {
      background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
      box-shadow: 0 6px 20px rgba(255,193,7,0.25);
    }
    
    .stat-card.comparisons:hover {
      box-shadow: 0 10px 30px rgba(255,193,7,0.4);
    }
    
    .stat-card.swaps {
      background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
      box-shadow: 0 6px 20px rgba(220,53,69,0.25);
    }
    
    .stat-card.swaps:hover {
      box-shadow: 0 10px 30px rgba(220,53,69,0.4);
    }
    
    .stat-card.time {
      background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
      box-shadow: 0 6px 20px rgba(111,66,193,0.25);
    }
    
    .stat-card.time:hover {
      box-shadow: 0 10px 30px rgba(111,66,193,0.4);
    }
    
    .stat-card.complexity {
      background: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%);
      box-shadow: 0 6px 20px rgba(253,126,20,0.25);
    }
    
    .stat-card.complexity:hover {
      box-shadow: 0 10px 30px rgba(253,126,20,0.4);
    }
    
    .stat-card.efficiency {
      background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
      box-shadow: 0 6px 20px rgba(32,201,151,0.25);
    }
    
    .stat-card.efficiency:hover {
      box-shadow: 0 10px 30px rgba(32,201,151,0.4);
    }
    
    .stat-card.memory {
      background: linear-gradient(135deg, #6610f2 0%, #495057 100%);
      box-shadow: 0 6px 20px rgba(102,16,242,0.25);
    }
    
    .stat-card.memory:hover {
      box-shadow: 0 10px 30px rgba(102,16,242,0.4);
    }
    
    .stat-value {
      font-size: 2em;
      font-weight: bold;
      margin-bottom: 8px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    
    .stat-label {
      font-size: 0.9em;
      opacity: 0.95;
      font-weight: 500;
    }
    
    .bars {
      display: flex;
      align-items: flex-end;
      height: 450px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      border-radius: 20px;
      margin-bottom: 25px;
      overflow: hidden;
      box-shadow: inset 0 4px 15px rgba(0,0,0,0.1);
      padding: 15px;
      position: relative;
      border: 3px solid rgba(102,126,234,0.1);
    }
    
    .bars::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
    }
    
    .bars::after {
      content: 'Visualiza√ß√£o em Tempo Real';
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 0.9em;
      color: #6c757d;
      font-weight: 600;
      opacity: 0.7;
    }
    
    .bar {
      flex: 1;
      margin: 0 1px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 8px 8px 0 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: flex-end;
      justify-content: center;
      color: #fff;
      font-size: 0.8em;
      font-weight: bold;
      user-select: none;
      position: relative;
      min-width: 6px;
      box-shadow: 0 4px 12px rgba(102,126,234,0.3);
    }
    
    .bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, rgba(255,255,255,0.4) 0%, transparent 60%);
      border-radius: 8px 8px 0 0;
      pointer-events: none;
    }
    
    .bar.comparing {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      transform: scale(1.08);
      box-shadow: 0 6px 25px rgba(255,154,158,0.5);
      animation: pulse 0.6s ease-in-out;
    }
    
    .bar.active {
      background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
      transform: scale(1.12);
      box-shadow: 0 8px 30px rgba(255,193,7,0.6);
      animation: glow 0.8s ease-in-out infinite alternate;
    }
    
    .bar.sorted {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      box-shadow: 0 6px 25px rgba(40,167,69,0.4);
      animation: success 0.5s ease-out;
    }
    
    .bar.pivot {
      background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
      transform: scale(1.18);
      box-shadow: 0 10px 35px rgba(111,66,193,0.6);
      animation: pivot-highlight 1s ease-in-out infinite alternate;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1.08); }
      50% { transform: scale(1.15); }
    }
    
    @keyframes glow {
      0% { box-shadow: 0 8px 30px rgba(255,193,7,0.6); }
      100% { box-shadow: 0 12px 40px rgba(255,193,7,0.8); }
    }
    
    @keyframes success {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    @keyframes pivot-highlight {
      0% { transform: scale(1.18); box-shadow: 0 10px 35px rgba(111,66,193,0.6); }
      100% { transform: scale(1.25); box-shadow: 0 15px 45px rgba(111,66,193,0.8); }
    }
    .info {
      background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
      border-left: 6px solid #28a745;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 25px;
      font-size: 1.15em;
      box-shadow: 0 6px 20px rgba(40,167,69,0.15);
      position: relative;
      overflow: hidden;
      line-height: 1.6;
    }
    
    .info::before {
      content: 'üí°';
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 1.5em;
      opacity: 0.7;
    }
    
    .info.sorting {
      background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
      border-left-color: #ffc107;
      animation: sorting-pulse 2s infinite;
    }
    
    .info.sorting::before {
      content: '‚ö°';
      animation: spin 2s linear infinite;
    }
    
    @keyframes sorting-pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 6px 20px rgba(255,193,7,0.15); }
      50% { transform: scale(1.02); box-shadow: 0 8px 25px rgba(255,193,7,0.25); }
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .tutorial-panel {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 25px;
      display: none;
      box-shadow: 0 8px 25px rgba(240,147,251,0.3);
    }
    
    .tutorial-panel.active {
      display: block;
      animation: slideIn 0.5s ease-out;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .tutorial-step {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      border-left: 4px solid rgba(255,255,255,0.5);
    }
    
    .tutorial-step h4 {
      margin: 0 0 10px 0;
      font-size: 1.2em;
    }
    
    /* Estilos para o painel de an√°lise de complexidade */
    .complexity-analysis-panel {
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      border-radius: 20px;
      padding: 25px;
      margin: 20px 0;
      border: 2px solid rgba(63,81,181,0.2);
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }
    
    .complexity-analysis-panel h3 {
      text-align: center;
      color: #3f51b5;
      margin-bottom: 20px;
      font-size: 1.5em;
    }
    
    .complexity-content {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 25px;
      align-items: center;
    }
    
    .complexity-metrics {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .complexity-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 15px;
      background: rgba(255,255,255,0.7);
      border-radius: 10px;
      border-left: 4px solid #3f51b5;
    }
    
    .complexity-label {
      font-weight: 500;
      color: #2c3e50;
    }
    
    .complexity-value {
      font-weight: bold;
      color: #3f51b5;
    }
    
    .complexity-visualization {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .complexity-bar {
      width: 100%;
      height: 40px;
      background: rgba(255,255,255,0.5);
      border-radius: 20px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .complexity-fill {
      height: 100%;
      background: linear-gradient(90deg, #4caf50, #2196f3);
      border-radius: 20px;
      transition: width 0.5s ease;
      width: 0%;
      position: relative;
    }
    
    .complexity-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-weight: bold;
      color: #2c3e50;
      z-index: 2;
    }
    
    .complexity-toggle {
      width: 100%;
      margin-top: 15px;
      background: linear-gradient(135deg, #3f51b5 0%, #9c27b0 100%);
      color: white;
      border: none;
      padding: 12px;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .complexity-toggle:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(63,81,181,0.3);
    }
    
    .complexity-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 18px;
      margin-top: 25px;
      padding: 25px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      border: 2px solid rgba(102,126,234,0.1);
    }
    
    .complexity-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .complexity-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: left 0.6s ease;
    }
    
    .complexity-card:hover::before {
      left: 100%;
    }
    
    .complexity-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .complexity-card h4 {
      margin: 0 0 12px 0;
      color: #2c3e50;
      font-size: 1.1em;
      font-weight: 600;
    }
    
    .complexity-value {
      font-size: 1.3em;
      font-weight: bold;
      padding: 8px 12px;
      border-radius: 8px;
      color: white;
    }
    
    .complexity-best { 
      border-left: 5px solid #28a745; 
    }
    .complexity-best .complexity-value { 
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    }
    
    .complexity-average { 
      border-left: 5px solid #ffc107; 
    }
    .complexity-average .complexity-value { 
      background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
    }
    
    .complexity-worst { 
      border-left: 5px solid #dc3545; 
    }
    .complexity-worst .complexity-value { 
      background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
    }
    
    .complexity-space { 
      border-left: 5px solid #6f42c1; 
    }
    .complexity-space .complexity-value { 
      background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
    }
    
    .comparison-table {
      margin: 25px 0;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      display: none;
    }
    
    .comparison-table.active {
      display: block;
      animation: slideIn 0.5s ease-out;
    }
    
    .comparison-table table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .comparison-table th {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px;
      text-align: left;
      font-weight: 600;
    }
    
    .comparison-table td {
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      transition: background 0.3s ease;
    }
    
    .comparison-table tr:hover td {
      background: #f8f9fa;
    }
    
    .performance-indicator {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.85em;
      font-weight: bold;
      color: white;
    }
    
    .performance-excellent { background: #28a745; }
    .performance-good { background: #ffc107; color: #333; }
    .performance-poor { background: #dc3545; }
    
    .footer {
      text-align: center;
      margin-top: 50px;
      padding: 30px;
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      border-radius: 20px;
      color: white;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }
    
    .footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
    }
    
    .footer h3 {
      margin-bottom: 15px;
      font-size: 1.5em;
    }
    
    .footer p {
      margin: 8px 0;
      opacity: 0.9;
    }
    
    .footer a {
      color: #4facfe;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s ease;
    }
    
    .footer a:hover {
      color: #00f2fe;
      text-decoration: underline;
    }
    
    .social-links {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    
    .social-link {
      display: inline-block;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .social-link:hover {
      background: rgba(255,255,255,0.2);
      transform: translateY(-3px);
    }
    
    @media (max-width: 768px) {
      .container { 
        padding: 20px 15px;
        margin: 10px;
      }
      .bars { 
        height: 300px; 
      }
      .header h1 {
        font-size: 2.2em;
      }
      .header h2 {
        font-size: 1.3em;
      }
      .controls {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      .stats {
        grid-template-columns: repeat(2, 1fr);
      }
      .complexity-info {
        grid-template-columns: 1fr;
      }
      .button-group {
        flex-direction: column;
      }
      .button-group button {
        min-width: auto;
      }
    }
    
    @media (max-width: 480px) {
      .header h1 {
        font-size: 1.8em;
      }
      .bars {
        height: 250px;
        padding: 8px;
      }
      .stats {
        grid-template-columns: 1fr;
      }
      .controls {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üîÄ Algoritmos de Ordena√ß√£o Interativos</h1>
    <h2>Visualize, compare e aprenda os principais algoritmos!</h2>
    <p class="author">üë®‚Äçüéì Prof. Vagner Cordeiro - Engenheiro de Computa√ß√£o</p>
  </div>

  <div class="container">
    <div class="controls">
      <div class="control-group">
        <label><span class="emoji">üîß</span> Algoritmo:</label>
        <select id="algorithm">
          <option value="bubble">ü´ß Bubble Sort</option>
          <option value="selection">üéØ Selection Sort</option>
          <option value="insertion">üìù Insertion Sort</option>
          <option value="quick">‚ö° Quick Sort</option>
          <option value="merge">üîÑ Merge Sort</option>
          <option value="heap">üå≥ Heap Sort</option>
        </select>
      </div>
      
      <div class="control-group">
        <label><span class="emoji">üìè</span> Tamanho do Array:</label>
        <input type="number" id="size" min="5" max="100" value="30">
      </div>
      
      <div class="control-group">
        <label><span class="emoji">‚ö°</span> Velocidade:</label>
        <div class="speed-control">
          <span class="speed-label">üêå</span>
          <input type="range" id="speed" min="10" max="200" value="80">
          <span class="speed-label">üöÄ</span>
        </div>
      </div>
      
      <div class="control-group">
        <label><span class="emoji">üéÆ</span> A√ß√µes:</label>
        <div class="button-group">
          <button onclick="randomize()">üîÑ Embaralhar</button>
          <button onclick="startSort()" id="sortBtn">‚ñ∂Ô∏è Ordenar</button>
          <button onclick="reset()">‚èπÔ∏è Resetar</button>
        </div>
      </div>
      
      <div class="control-group">
        <label><span class="emoji">üéì</span> Modos:</label>
        <div class="button-group">
          <button onclick="toggleTutorial()" class="tutorial-mode" id="tutorialBtn">üìö Tutorial</button>
          <button onclick="toggleComparison()" class="compare-mode" id="compareBtn">üìä Comparar</button>
          <button onclick="toggleComplexityPanel()" class="complexity-mode" id="complexityBtn">üî¨ An√°lise</button>
        </div>
      </div>
    </div>

    <div class="mode-selector">
      <div class="mode-btn active" onclick="setVisualizationMode('bars')">üìä Barras</div>
      <div class="mode-btn" onclick="setVisualizationMode('dots')">‚ö™ Pontos</div>
      <div class="mode-btn" onclick="setVisualizationMode('lines')">üìà Linhas</div>
    </div>

    <div class="stats">
      <div class="stat-card">
        <div class="stat-value" id="comparisons">0</div>
        <div class="stat-label">Compara√ß√µes</div>
      </div>
      <div class="stat-card swaps">
        <div class="stat-value" id="swaps">0</div>
        <div class="stat-label">Trocas</div>
      </div>
      <div class="stat-card time">
        <div class="stat-value" id="timeElapsed">0s</div>
        <div class="stat-label">Tempo</div>
      </div>
      <div class="stat-card complexity">
        <div class="stat-value" id="complexity">O(n¬≤)</div>
        <div class="stat-label">Complexidade</div>
      </div>
      <div class="stat-card efficiency">
        <div class="stat-value" id="efficiency">-</div>
        <div class="stat-label">Efici√™ncia</div>
      </div>
      <div class="stat-card memory">
        <div class="stat-value" id="memory">O(1)</div>
        <div class="stat-label">Mem√≥ria</div>
      </div>
    </div>

    <div class="visualization-container">
      <div class="bars" id="bars"></div>
    </div>

    <div class="info" id="info"></div>
    
    <div class="tutorial-panel" id="tutorialPanel">
      <h3>üéì Modo Tutorial Ativo</h3>
      <div id="tutorialContent">
        <div class="tutorial-step">
          <h4>1Ô∏è‚É£ Compreenda o Algoritmo</h4>
          <p>Observe como cada algoritmo tem uma estrat√©gia diferente para ordenar os elementos.</p>
        </div>
        <div class="tutorial-step">
          <h4>2Ô∏è‚É£ Acompanhe as Cores</h4>
          <p><span style="color: #ffc107;">üü° Amarelo</span> = Elemento ativo | <span style="color: #ff9a9e;">üî¥ Rosa</span> = Comparando | <span style="color: #6f42c1;">üü£ Roxo</span> = Piv√¥</p>
        </div>
        <div class="tutorial-step">
          <h4>3Ô∏è‚É£ Observe as Estat√≠sticas</h4>
          <p>Veja como diferentes algoritmos fazem mais ou menos compara√ß√µes e trocas.</p>
        </div>
        <div class="tutorial-step">
          <h4>4Ô∏è‚É£ Analise a Complexidade</h4>
          <p>Compare a performance real com a complexidade te√≥rica e veja a efici√™ncia em tempo real.</p>
        </div>
      </div>
    </div>
    
    <!-- Novo Painel de An√°lise de Complexidade -->
    <div class="complexity-analysis-panel" id="complexityPanel" style="display: none;">
      <h3>üìä An√°lise de Complexidade em Tempo Real</h3>
      <div class="complexity-content">
        <div class="complexity-metrics">
          <div class="complexity-item">
            <span class="complexity-label">Compara√ß√µes Te√≥ricas (Pior Caso):</span>
            <span class="complexity-value" id="theoreticalComparisons">-</span>
          </div>
          <div class="complexity-item">
            <span class="complexity-label">Compara√ß√µes Reais:</span>
            <span class="complexity-value" id="realComparisons">0</span>
          </div>
          <div class="complexity-item">
            <span class="complexity-label">Efici√™ncia Relativa:</span>
            <span class="complexity-value" id="relativeEfficiency">-</span>
          </div>
          <div class="complexity-item">
            <span class="complexity-label">Performance vs Te√≥rica:</span>
            <span class="complexity-value" id="performanceRatio">-</span>
          </div>
        </div>
        <div class="complexity-visualization">
          <div class="complexity-bar">
            <div class="complexity-fill" id="complexityFill"></div>
            <span class="complexity-text">Performance Real</span>
          </div>
        </div>
      </div>
      <button onclick="toggleComplexityPanel()" class="complexity-toggle">üî¨ An√°lise Detalhada</button>
    </div>
    
    <div class="comparison-table" id="comparisonTable">
      <h3 style="text-align: center; margin: 20px 0; color: #2c3e50;">üìä Compara√ß√£o Detalhada de Algoritmos</h3>
      <table>
        <thead>
          <tr>
            <th>üîß Algoritmo</th>
            <th>‚ö° Melhor Caso</th>
            <th>üìä Caso M√©dio</th>
            <th>üî• Pior Caso</th>
            <th>üóÑÔ∏è Espa√ßo</th>
            <th>‚úÖ Est√°vel</th>
            <th>üìã Uso Ideal</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Bubble Sort</strong></td>
            <td><span class="performance-indicator performance-good">O(n)</span></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-excellent">O(1)</span></td>
            <td>‚úÖ Sim</td>
            <td>Ensino, arrays muito pequenos</td>
          </tr>
          <tr>
            <td><strong>Selection Sort</strong></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-excellent">O(1)</span></td>
            <td>‚ùå N√£o</td>
            <td>Mem√≥ria limitada</td>
          </tr>
          <tr>
            <td><strong>Insertion Sort</strong></td>
            <td><span class="performance-indicator performance-excellent">O(n)</span></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-excellent">O(1)</span></td>
            <td>‚úÖ Sim</td>
            <td>Arrays pequenos, quase ordenados</td>
          </tr>
          <tr>
            <td><strong>Quick Sort</strong></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-poor">O(n¬≤)</span></td>
            <td><span class="performance-indicator performance-good">O(log n)</span></td>
            <td>‚ùå N√£o</td>
            <td>Prop√≥sito geral, performance</td>
          </tr>
          <tr>
            <td><strong>Merge Sort</strong></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-good">O(n)</span></td>
            <td>‚úÖ Sim</td>
            <td>Estabilidade, arrays grandes</td>
          </tr>
          <tr>
            <td><strong>Heap Sort</strong></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-excellent">O(n log n)</span></td>
            <td><span class="performance-indicator performance-excellent">O(1)</span></td>
            <td>‚ùå N√£o</td>
            <td>Performance garantida</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div class="complexity-info" id="complexityInfo">
      <div class="complexity-card complexity-best">
        <h4>üèÜ Melhor Caso</h4>
        <div class="complexity-value" id="bestCase">-</div>
      </div>
      <div class="complexity-card complexity-average">
        <h4>üìä Caso M√©dio</h4>
        <div class="complexity-value" id="averageCase">-</div>
      </div>
      <div class="complexity-card complexity-worst">
        <h4>üî• Pior Caso</h4>
        <div class="complexity-value" id="worstCase">-</div>
      </div>
      <div class="complexity-card complexity-space">
        <h4>üóÑÔ∏è Espa√ßo</h4>
        <div class="complexity-value" id="spaceComplexity">-</div>
      </div>
    </div>

    <div class="footer">
      <h3>üéì Prof. Vagner Cordeiro</h3>
      <p><strong>Engenheiro de Computa√ß√£o - Especialista em Did√°tica de Algoritmos</strong></p>
      <p>üìö <em>Transformando conceitos complexos em experi√™ncias visuais interativas</em></p>
      <p>üîó <a href="https://github.com/cordeirotelecom/algoritimos_e_complexidade" target="_blank">üìÅ Ver c√≥digo completo no GitHub</a></p>
      <p>üí° <strong>Vers√£o 3.0 Premium</strong> - Material Did√°tico Profissional</p>
      
      <div class="social-links">
        <a href="#" class="social-link" title="LinkedIn">üíº</a>
        <a href="https://github.com/cordeirotelecom" class="social-link" title="GitHub" target="_blank">üêô</a>
        <a href="#" class="social-link" title="YouTube">üì∫</a>
        <a href="#" class="social-link" title="Email">üìß</a>
      </div>
    </div>
  </div>
  <script>
    // --- Dados e Estado ---
    let arr = [];
    let original = [];
    let running = false;
    let speed = 80;
    let currentAlgorithm = 'bubble';
    let size = 30;
    let comparisons = 0;
    let swaps = 0;
    let startTime = 0;
    let tutorialMode = false;
    let comparisonMode = false;
    let visualizationMode = 'bars';

    const algorithmInfo = {
      bubble: {
        name: 'Bubble Sort',
        description: 'ü´ß <strong>Bubble Sort</strong>: Compara elementos adjacentes e "faz bolhas" subirem. O algoritmo mais simples de entender, mas ineficiente para grandes volumes de dados. Ideal para ensino de conceitos b√°sicos.',
        tutorial: 'Observe como as "bolhas" maiores sobem para o final do array, uma posi√ß√£o por vez. Cada passada garante que pelo menos um elemento esteja na posi√ß√£o correta.',
        best: 'O(n)',
        average: 'O(n¬≤)',
        worst: 'O(n¬≤)',
        space: 'O(1)',
        stable: true,
        useCase: 'Ensino, arrays muito pequenos (< 10 elementos)'
      },
      selection: {
        name: 'Selection Sort',
        description: 'üéØ <strong>Selection Sort</strong>: Seleciona repetidamente o menor elemento e coloca na posi√ß√£o correta. Performance consistente, mas n√£o otimizada para casos especiais.',
        tutorial: 'Veja como o algoritmo "seleciona" o menor elemento a cada itera√ß√£o. A parte ordenada cresce da esquerda para a direita.',
        best: 'O(n¬≤)',
        average: 'O(n¬≤)',
        worst: 'O(n¬≤)',
        space: 'O(1)',
        stable: false,
        useCase: 'Quando a mem√≥ria √© extremamente limitada'
      },
      insertion: {
        name: 'Insertion Sort',
        description: 'üìù <strong>Insertion Sort</strong>: Insere cada elemento na posi√ß√£o correta dentro da parte j√° ordenada. Excelente para arrays pequenos ou quase ordenados.',
        tutorial: 'Observe como cada elemento √© "inserido" na posi√ß√£o correta, como organizar cartas na m√£o. Muito eficiente para dados quase ordenados.',
        best: 'O(n)',
        average: 'O(n¬≤)',
        worst: 'O(n¬≤)',
        space: 'O(1)',
        stable: true,
        useCase: 'Arrays pequenos, dados quase ordenados, algoritmo h√≠brido'
      },
      quick: {
        name: 'Quick Sort',
        description: '‚ö° <strong>Quick Sort</strong>: Divide o array usando um piv√¥ e conquista recursivamente. Um dos algoritmos mais r√°pidos na pr√°tica, usado como padr√£o na maioria das linguagens.',
        tutorial: 'Foque no elemento roxo (piv√¥). Veja como ele "particiona" o array: menores √† esquerda, maiores √† direita. Depois aplica o mesmo processo recursivamente.',
        best: 'O(n log n)',
        average: 'O(n log n)',
        worst: 'O(n¬≤)',
        space: 'O(log n)',
        stable: false,
        useCase: 'Uso geral, alta performance, padr√£o em bibliotecas'
      },
      merge: {
        name: 'Merge Sort',
        description: 'üîÑ <strong>Merge Sort</strong>: Divide o array pela metade recursivamente, ordena cada parte e depois mescla. Garantia de performance consistente e estabilidade.',
        tutorial: 'Algoritmo "dividir para conquistar". Primeiro divide at√© ter elementos √∫nicos, depois mescla ordenadamente. Performance sempre O(n log n).',
        best: 'O(n log n)',
        average: 'O(n log n)',
        worst: 'O(n log n)',
        space: 'O(n)',
        stable: true,
        useCase: 'Arrays grandes, quando estabilidade √© necess√°ria'
      },
      heap: {
        name: 'Heap Sort',
        description: 'üå≥ <strong>Heap Sort</strong>: Constr√≥i uma estrutura heap (√°rvore bin√°ria) e extrai elementos ordenadamente. Performance garantida sem recurs√£o excessiva.',
        tutorial: 'Primeiro constr√≥i um "heap" (√°rvore onde pai ‚â• filhos), depois remove o maior elemento repetidamente. Combina o melhor dos algoritmos simples e eficientes.',
        best: 'O(n log n)',
        average: 'O(n log n)',
        worst: 'O(n log n)',
        space: 'O(1)',
        stable: false,
        useCase: 'Quando se precisa de performance garantida com espa√ßo limitado'
      }
    };

    // --- Utilit√°rios Avan√ßados ---
    function randomArray(n) {
      let a = [];
      for (let i = 1; i <= n; i++) a.push(i);
      for (let i = n - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function render(arr, comparing = [], active = [], sorted = [], pivot = []) {
      const bars = document.getElementById('bars');
      bars.innerHTML = '';
      const max = Math.max(...arr);
      
      arr.forEach((val, i) => {
        const element = document.createElement('div');
        element.className = 'bar';
        
        if (comparing.includes(i)) element.classList.add('comparing');
        if (active.includes(i)) element.classList.add('active');
        if (sorted.includes(i)) element.classList.add('sorted');
        if (pivot.includes(i)) element.classList.add('pivot');
        
        element.style.height = (val / max * 85) + '%';
        element.textContent = arr.length <= 50 ? val : '';
        element.setAttribute('data-value', val);
        element.setAttribute('data-index', i);
        
        // Adicionar tooltip
        element.title = `Valor: ${val}, Posi√ß√£o: ${i}`;
        
        bars.appendChild(element);
      });
    }

    function updateStats() {
      document.getElementById('comparisons').textContent = comparisons.toLocaleString();
      document.getElementById('swaps').textContent = swaps.toLocaleString();
      const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);
      document.getElementById('timeElapsed').textContent = elapsed + 's';
      
      // Atualizar novas m√©tricas
      const currentAlg = document.getElementById('algorithmSelect').value;
      const complexity = getComplexity(currentAlg);
      document.getElementById('complexity').textContent = complexity.average;
      document.getElementById('memory').textContent = complexity.space;
      
      // Calcular efici√™ncia baseada em compara√ß√µes vs tamanho do array
      const efficiency = calculateEfficiency(comparisons, arraySize);
      document.getElementById('efficiency').textContent = efficiency;
      
      // Atualizar an√°lise de complexidade se o painel estiver vis√≠vel
      const complexityPanel = document.getElementById('complexityPanel');
      if (complexityPanel && complexityPanel.style.display !== 'none') {
        updateComplexityAnalysis();
      }
    }
    
    function getComplexity(algorithm) {
      const complexities = {
        bubble: { best: 'O(n)', average: 'O(n¬≤)', worst: 'O(n¬≤)', space: 'O(1)' },
        selection: { best: 'O(n¬≤)', average: 'O(n¬≤)', worst: 'O(n¬≤)', space: 'O(1)' },
        insertion: { best: 'O(n)', average: 'O(n¬≤)', worst: 'O(n¬≤)', space: 'O(1)' },
        merge: { best: 'O(n log n)', average: 'O(n log n)', worst: 'O(n log n)', space: 'O(n)' },
        quick: { best: 'O(n log n)', average: 'O(n log n)', worst: 'O(n¬≤)', space: 'O(log n)' }
      };
      return complexities[algorithm] || complexities.bubble;
    }
    
    function calculateEfficiency(comps, size) {
      if (comps === 0) return '-';
      const theoretical = size * size; // Pior caso O(n¬≤)
      const efficiency = Math.max(0, Math.min(100, ((theoretical - comps) / theoretical * 100)));
      return efficiency.toFixed(1) + '%';
    }

    function setAlgorithmInfo(alg) {
      const info = algorithmInfo[alg];
      document.getElementById('info').innerHTML = info.description;
      document.getElementById('bestCase').textContent = info.best;
      document.getElementById('averageCase').textContent = info.average;
      document.getElementById('worstCase').textContent = info.worst;
      document.getElementById('spaceComplexity').textContent = info.space;
      
      if (tutorialMode) {
        updateTutorialContent(alg);
      }
    }

    function updateTutorialContent(alg) {
      const info = algorithmInfo[alg];
      document.getElementById('tutorialContent').innerHTML = `
        <div class="tutorial-step">
          <h4>üéØ Estrat√©gia do ${info.name}</h4>
          <p>${info.tutorial}</p>
        </div>
        <div class="tutorial-step">
          <h4>üìä Complexidade</h4>
          <p><strong>Melhor:</strong> ${info.best} | <strong>M√©dio:</strong> ${info.average} | <strong>Pior:</strong> ${info.worst}</p>
        </div>
        <div class="tutorial-step">
          <h4>üí° Quando Usar</h4>
          <p>${info.useCase}</p>
        </div>
      `;
    }

    function resetStats() {
      comparisons = 0;
      swaps = 0;
      startTime = Date.now();
      updateStats();
    }

    function randomize() {
      if (running) return;
      size = parseInt(document.getElementById('size').value);
      if (size < 5) size = 5;
      if (size > 100) size = 100;
      document.getElementById('size').value = size;
      
      arr = randomArray(size);
      original = arr.slice();
      render(arr);
      resetStats();
      setAlgorithmInfo(document.getElementById('algorithm').value);
      
      if (tutorialMode) {
        showTutorialMessage('üîÑ Array embaralhado! Agora voc√™ pode executar o algoritmo e observar como funciona.');
      }
    }

    function reset() {
      if (running) return;
      arr = original.slice();
      render(arr);
      resetStats();
      setAlgorithmInfo(document.getElementById('algorithm').value);
      
      if (tutorialMode) {
        showTutorialMessage('‚èπÔ∏è Array resetado para o estado inicial. Pronto para uma nova execu√ß√£o!');
      }
    }

    function updateControls(disabled) {
      const controls = ['algorithm', 'size', 'speed'];
      controls.forEach(id => {
        document.getElementById(id).disabled = disabled;
      });
      
      const sortBtn = document.getElementById('sortBtn');
      sortBtn.textContent = disabled ? '‚è∏Ô∏è Ordenando...' : '‚ñ∂Ô∏è Ordenar';
      sortBtn.disabled = disabled;
      
      // Desabilitar outros bot√µes durante ordena√ß√£o
      document.querySelector('button[onclick="randomize()"]').disabled = disabled;
      document.querySelector('button[onclick="reset()"]').disabled = disabled;
    }

    function showTutorialMessage(message) {
      const info = document.getElementById('info');
      const originalContent = info.innerHTML;
      info.innerHTML = `üí° <strong>Tutorial:</strong> ${message}`;
      info.classList.add('sorting');
      
      setTimeout(() => {
        info.innerHTML = originalContent;
        info.classList.remove('sorting');
      }, 3000);
    }

    // --- Fun√ß√µes de Modo ---
    function toggleTutorial() {
      tutorialMode = !tutorialMode;
      const panel = document.getElementById('tutorialPanel');
      const btn = document.getElementById('tutorialBtn');
      
      if (tutorialMode) {
        panel.classList.add('active');
        btn.textContent = 'üìö Tutorial ON';
        btn.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
        updateTutorialContent(currentAlgorithm);
        showTutorialMessage('Modo tutorial ativado! Observe as explica√ß√µes detalhadas durante a ordena√ß√£o.');
      } else {
        panel.classList.remove('active');
        btn.textContent = 'üìö Tutorial';
        btn.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
      }
    }

    function toggleComparison() {
      comparisonMode = !comparisonMode;
      const table = document.getElementById('comparisonTable');
      const btn = document.getElementById('compareBtn');
      
      if (comparisonMode) {
        table.classList.add('active');
        btn.textContent = 'üìä Comparar ON';
        btn.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
      } else {
        table.classList.remove('active');
        btn.textContent = 'üìä Comparar';
        btn.style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
      }
    }

    function setVisualizationMode(mode) {
      visualizationMode = mode;
      document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      render(arr); // Re-render com novo modo
    }

    // --- Event Listeners ---
    document.getElementById('algorithm').addEventListener('change', e => {
      if (running) return;
      currentAlgorithm = e.target.value;
      setAlgorithmInfo(currentAlgorithm);
    });

    document.getElementById('size').addEventListener('change', e => {
      if (running) return;
      randomize();
    });

    document.getElementById('speed').addEventListener('input', e => {
      speed = parseInt(e.target.value);
    });

    // --- Algoritmos de Ordena√ß√£o ---
    async function startSort() {
      if (running) return;
      running = true;
      startTime = Date.now();
      resetStats();
      updateControls(true);
      
      const infoElement = document.getElementById('info');
      infoElement.classList.add('sorting');
      infoElement.textContent = `üîÑ Ordenando com ${algorithmInfo[currentAlgorithm].name}...`;
      
      switch (document.getElementById('algorithm').value) {
        case 'bubble': await bubbleSort(); break;
        case 'selection': await selectionSort(); break;
        case 'insertion': await insertionSort(); break;
        case 'quick': await quickSort(0, arr.length - 1); break;
        case 'merge': await mergeSort(0, arr.length - 1); break;
        case 'heap': await heapSort(); break;
      }
      
      render(arr, [], [], Array.from({length: arr.length}, (_, i) => i));
      infoElement.classList.remove('sorting');
      setAlgorithmInfo(document.getElementById('algorithm').value);
      updateControls(false);
      running = false;
    }

    async function bubbleSort() {
      let n = arr.length;
      for (let i = 0; i < n - 1; i++) {
        for (let j = 0; j < n - i - 1; j++) {
          comparisons++;
          render(arr, [j, j+1], [], Array.from({length: i}, (_, k) => n-1-k));
          updateStats();
          await sleep(220 - speed);
          if (arr[j] > arr[j+1]) {
            [arr[j], arr[j+1]] = [arr[j+1], arr[j]];
            swaps++;
            updateStats();
          }
        }
      }
    }

    async function selectionSort() {
      let n = arr.length;
      for (let i = 0; i < n - 1; i++) {
        let min = i;
        for (let j = i + 1; j < n; j++) {
          comparisons++;
          render(arr, [min, j], [], Array.from({length: i}, (_, k) => k));
          updateStats();
          await sleep(220 - speed);
          if (arr[j] < arr[min]) min = j;
        }
        if (min !== i) {
          [arr[i], arr[min]] = [arr[min], arr[i]];
          swaps++;
          updateStats();
        }
      }
    }

    async function insertionSort() {
      let n = arr.length;
      for (let i = 1; i < n; i++) {
        let key = arr[i];
        let j = i - 1;
        while (j >= 0 && arr[j] > key) {
          comparisons++;
          render(arr, [j, j+1], [], Array.from({length: i}, (_, k) => k));
          updateStats();
          await sleep(220 - speed);
          arr[j+1] = arr[j];
          swaps++;
          updateStats();
          j--;
        }
        arr[j+1] = key;
      }
    }

    async function quickSort(l, r) {
      if (l >= r) return;
      let pivot = arr[r];
      let i = l;
      render(arr, [], [], [], [r]);
      await sleep(220 - speed);
      
      for (let j = l; j < r; j++) {
        comparisons++;
        render(arr, [j], [], [], [r]);
        updateStats();
        await sleep(220 - speed);
        if (arr[j] < pivot) {
          [arr[i], arr[j]] = [arr[j], arr[i]];
          swaps++;
          updateStats();
          i++;
        }
      }
      [arr[i], arr[r]] = [arr[r], arr[i]];
      swaps++;
      updateStats();
      
      await quickSort(l, i - 1);
      await quickSort(i + 1, r);
    }

    async function mergeSort(l, r) {
      if (l >= r) return;
      let m = Math.floor((l + r) / 2);
      await mergeSort(l, m);
      await mergeSort(m + 1, r);
      
      let left = arr.slice(l, m + 1);
      let right = arr.slice(m + 1, r + 1);
      let i = 0, j = 0, k = l;
      
      while (i < left.length && j < right.length) {
        comparisons++;
        render(arr, [k], []);
        updateStats();
        await sleep(220 - speed);
        if (left[i] <= right[j]) {
          arr[k++] = left[i++];
        } else {
          arr[k++] = right[j++];
        }
        swaps++;
        updateStats();
      }
      
      while (i < left.length) arr[k++] = left[i++];
      while (j < right.length) arr[k++] = right[j++];
    }

    async function heapSort() {
      let n = arr.length;
      
      // Build heap
      for (let i = Math.floor(n / 2) - 1; i >= 0; i--) {
        await heapify(arr, n, i);
      }
      
      // Extract elements from heap one by one
      for (let i = n - 1; i > 0; i--) {
        [arr[0], arr[i]] = [arr[i], arr[0]];
        swaps++;
        updateStats();
        render(arr, [0, i], [], Array.from({length: n - i}, (_, k) => n - 1 - k));
        await sleep(220 - speed);
        await heapify(arr, i, 0);
      }
    }

    async function heapify(arr, n, i) {
      let largest = i;
      let l = 2 * i + 1;
      let r = 2 * i + 2;
      
      if (l < n && arr[l] > arr[largest]) {
        comparisons++;
        largest = l;
      }
      
      if (r < n && arr[r] > arr[largest]) {
        comparisons++;
        largest = r;
      }
      
      if (largest !== i) {
        render(arr, [i, largest]);
        updateStats();
        await sleep(220 - speed);
        [arr[i], arr[largest]] = [arr[largest], arr[i]];
        swaps++;
        updateStats();
        await heapify(arr, n, largest);
      }
    }

    function sleep(ms) { 
      return new Promise(resolve => setTimeout(resolve, ms)); 
    }

    // --- Fun√ß√µes do Painel de Complexidade ---
    function toggleComplexityPanel() {
      const panel = document.getElementById('complexityPanel');
      const isVisible = panel.style.display !== 'none';
      panel.style.display = isVisible ? 'none' : 'block';
      updateComplexityAnalysis();
    }
    
    function updateComplexityAnalysis() {
      const currentAlg = document.getElementById('algorithmSelect').value;
      const theoretical = calculateTheoreticalComparisons(currentAlg, arraySize);
      
      document.getElementById('theoreticalComparisons').textContent = theoretical.toLocaleString();
      document.getElementById('realComparisons').textContent = comparisons.toLocaleString();
      
      if (theoretical > 0) {
        const efficiency = ((theoretical - comparisons) / theoretical * 100);
        const ratio = (comparisons / theoretical * 100);
        
        document.getElementById('relativeEfficiency').textContent = efficiency.toFixed(1) + '%';
        document.getElementById('performanceRatio').textContent = ratio.toFixed(1) + '% do te√≥rico';
        
        // Atualizar barra de visualiza√ß√£o
        const fillWidth = Math.min(100, ratio);
        document.getElementById('complexityFill').style.width = fillWidth + '%';
        
        // Mudar cor baseado na performance
        const fill = document.getElementById('complexityFill');
        if (ratio <= 50) {
          fill.style.background = 'linear-gradient(90deg, #4caf50, #8bc34a)'; // Verde - Excelente
        } else if (ratio <= 75) {
          fill.style.background = 'linear-gradient(90deg, #ff9800, #ffc107)'; // Amarelo - Bom
        } else {
          fill.style.background = 'linear-gradient(90deg, #f44336, #ff5722)'; // Vermelho - Precisa melhorar
        }
      }
    }
    
    function calculateTheoreticalComparisons(algorithm, size) {
      switch(algorithm) {
        case 'bubble':
        case 'selection':
          return (size * (size - 1)) / 2; // O(n¬≤)
        case 'insertion':
          return (size * (size - 1)) / 4; // O(n¬≤) caso m√©dio
        case 'merge':
          return size * Math.log2(size); // O(n log n)
        case 'quick':
          return size * Math.log2(size); // O(n log n) caso m√©dio
        case 'heap':
          return size * Math.log2(size); // O(n log n)
        default:
          return size * size; // Padr√£o O(n¬≤)
      }
    }

    // --- Inicializa√ß√£o Avan√ßada ---
    function initialize() {
      // Configurar estado inicial
      randomize();
      setAlgorithmInfo('bubble');
      
      // Adicionar eventos de teclado para acessibilidade
      document.addEventListener('keydown', (e) => {
        if (e.code === 'Space' && !running) {
          e.preventDefault();
          sort();
        } else if (e.code === 'KeyR' && !running) {
          e.preventDefault();
          randomize();
        } else if (e.code === 'KeyT') {
          e.preventDefault();
          toggleTutorial();
        }
      });
      
      // Mostrar mensagem de boas-vindas
      setTimeout(() => {
        const info = document.getElementById('info');
        const originalContent = info.innerHTML;
        info.innerHTML = 'üöÄ <strong>Bem-vindo!</strong> Escolha um algoritmo e clique em "Ordenar" para come√ßar. Use as teclas: Espa√ßo (ordenar), R (randomizar), T (tutorial).';
        info.classList.add('sorting');
        
        setTimeout(() => {
          info.innerHTML = originalContent;
          info.classList.remove('sorting');
        }, 4000);
      }, 500);
    }

    // Inicializar quando a p√°gina carregar
    window.addEventListener('DOMContentLoaded', initialize);
  </script>
</body>
</html>
