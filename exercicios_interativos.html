<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exerc√≠cios Interativos - Algoritmos e Complexidade</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <link rel="stylesheet" href="assets/exercicios-interativos.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/clike/clike.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="assets/algorithm-system.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }

        .level-selector {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .level-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .level-btn.iniciante {
            background: #27ae60;
            color: white;
        }

        .level-btn.intermediario {
            background: #f39c12;
            color: white;
        }

        .level-btn.avancado {
            background: #e74c3c;
            color: white;
        }

        .level-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .level-btn.active {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .exercise-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .exercise-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        .exercise-title {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .exercise-description {
            color: #7f8c8d;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .complexity-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .code-editor {
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .output-panel {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .visualization-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            margin-top: 20px;
        }

        .complexity-chart {
            max-width: 500px;
            margin: 0 auto;
        }

        .test-cases {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .test-case {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .test-case:last-child {
            border-bottom: none;
        }

        .test-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        .test-pass {
            background: #27ae60;
        }

        .test-fail {
            background: #e74c3c;
        }

        .test-pending {
            background: #95a5a6;
        }

        .hint-panel {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .achievement {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .timer {
            background: #34495e;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .exercise-container {
                grid-template-columns: 1fr;
            }
            
            .level-selector {
                justify-content: center;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Exerc√≠cios Interativos</h1>
            <p>Aprenda Algoritmos e Complexidade na Pr√°tica</p>
        </div>

        <div class="progress-container">
            <h3>Progresso Geral</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="overallProgress"></div>
            </div>
            <p id="progressText">0/20 exerc√≠cios completados</p>
            
            <!-- Sistema de XP e Badges -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px; flex-wrap: wrap;">
                <div class="xp-bar" id="userXP">XP: 0</div>
                <div class="streak-counter" id="userStreak">
                    üî• Sequ√™ncia: 0
                </div>
                <div id="userBadges" style="display: flex; gap: 5px; flex-wrap: wrap;">
                    <!-- Badges aparecer√£o aqui -->
                </div>
            </div>
        </div>

        <div class="level-selector">
            <button class="level-btn iniciante active" onclick="selectLevel('iniciante')">
                üü¢ Iniciante (O(1), O(n))
            </button>
            <button class="level-btn intermediario" onclick="selectLevel('intermediario')">
                üü° Intermedi√°rio (O(log n), O(n¬≤))
            </button>
            <button class="level-btn avancado" onclick="selectLevel('avancado')">
                üî¥ Avan√ßado (O(n¬≥), O(2‚Åø))
            </button>
        </div>

        <div class="timer" id="timer">‚è±Ô∏è Tempo: 00:00</div>

        <div class="exercise-container">
            <div class="exercise-panel">
                <h2 class="exercise-title" id="exerciseTitle">Carregando exerc√≠cio...</h2>
                <div class="exercise-description" id="exerciseDescription"></div>
                
                <div class="complexity-info" id="complexityInfo"></div>
                
                <div class="test-cases" id="testCases"></div>
                
                <div class="code-editor">
                    <textarea id="codeInput"></textarea>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="runCode()">‚ñ∂Ô∏è Executar</button>
                    <button class="btn btn-success" onclick="testSolution()">‚úÖ Testar</button>
                    <button class="btn btn-warning" onclick="showHint()">üí° Dica</button>
                    <button class="btn btn-primary" onclick="nextExercise()">‚û°Ô∏è Pr√≥ximo</button>
                </div>
                
                <div class="output-panel" id="output">Resultado aparecer√° aqui...</div>
                
                <div class="hint-panel" id="hintPanel"></div>
            </div>

            <div class="exercise-panel">
                <h2 class="exercise-title">üìä An√°lise de Complexidade</h2>
                <canvas id="complexityChart" width="400" height="300"></canvas>
                
                <div style="margin-top: 20px;">
                    <h3>Performance em Tempo Real</h3>
                    <div id="performanceData"></div>
                </div>
            </div>
        </div>

        <div class="visualization-panel">
            <h2 class="exercise-title">üé¨ Visualiza√ß√£o do Algoritmo</h2>
            <div id="algorithmVisualization"></div>
        </div>
    </div>

    <script>
        // Estado global da aplica√ß√£o
        let currentLevel = 'iniciante';
        let currentExercise = 0;
        let completedExercises = new Set();
        let startTime = Date.now();
        let editor;
        let complexityChart;

        // Dados dos exerc√≠cios organizados por n√≠vel
        const exercises = {
            iniciante: [
                {
                    title: "1. Acesso Direto - O(1)",
                    description: "Implemente uma fun√ß√£o que retorna o primeiro elemento de um array. Esta √© uma opera√ß√£o de tempo constante.",
                    complexity: "O(1) - Tempo Constante",
                    template: `// Fun√ß√£o para acessar o primeiro elemento
int primeiro_elemento(int arr[], int tamanho) {
    // TODO: Implemente aqui
    
}`,
                    solution: `int primeiro_elemento(int arr[], int tamanho) {
    if (tamanho > 0) {
        return arr[0];
    }
    return -1; // Valor padr√£o se array vazio
}`,
                    testCases: [
                        { input: "[5, 2, 8, 1]", expected: "5", description: "Primeiro de [5,2,8,1]" },
                        { input: "[100]", expected: "100", description: "Array com um elemento" },
                        { input: "[7, 3, 9, 2, 1]", expected: "7", description: "Primeiro de array maior" }
                    ],
                    hint: "Lembre-se: o primeiro elemento est√° sempre na posi√ß√£o 0. O tempo √© sempre o mesmo, independente do tamanho do array!",
                    explanation: "O acesso direto a uma posi√ß√£o espec√≠fica do array √© sempre O(1) porque o computador calcula diretamente o endere√ßo de mem√≥ria."
                },
                {
                    title: "2. Busca Linear - O(n)",
                    description: "Implemente uma busca linear que encontra a posi√ß√£o de um elemento no array.",
                    complexity: "O(n) - Tempo Linear",
                    template: `// Fun√ß√£o de busca linear
int busca_linear(int arr[], int tamanho, int valor) {
    // TODO: Percorra o array procurando o valor
    
}`,
                    solution: `int busca_linear(int arr[], int tamanho, int valor) {
    for (int i = 0; i < tamanho; i++) {
        if (arr[i] == valor) {
            return i; // Retorna a posi√ß√£o encontrada
        }
    }
    return -1; // N√£o encontrado
}`,
                    testCases: [
                        { input: "([5, 2, 8, 1], 8)", expected: "2", description: "Buscar 8 em [5,2,8,1]" },
                        { input: "([5, 2, 8, 1], 1)", expected: "3", description: "Buscar 1 em [5,2,8,1]" },
                        { input: "([5, 2, 8, 1], 9)", expected: "-1", description: "Buscar 9 (n√£o existe)" }
                    ],
                    hint: "Use um loop for para percorrer todos os elementos. Compare cada elemento com o valor procurado.",
                    explanation: "No pior caso, precisamos verificar todos os elementos, por isso O(n). O tempo cresce linearmente com o tamanho."
                },
                {
                    title: "3. Soma de Array - O(n)",
                    description: "Calcule a soma de todos os elementos de um array.",
                    complexity: "O(n) - Tempo Linear",
                    template: `// Fun√ß√£o para somar elementos
int somar_array(int arr[], int tamanho) {
    // TODO: Some todos os elementos
    
}`,
                    solution: `int somar_array(int arr[], int tamanho) {
    int soma = 0;
    for (int i = 0; i < tamanho; i++) {
        soma += arr[i];
    }
    return soma;
}`,
                    testCases: [
                        { input: "[1, 2, 3, 4]", expected: "10", description: "Soma de [1,2,3,4]" },
                        { input: "[5, 5, 5]", expected: "15", description: "Soma de [5,5,5]" },
                        { input: "[0, -1, 1]", expected: "0", description: "Soma com negativos" }
                    ],
                    hint: "Initialize uma vari√°vel soma com 0, ent√£o adicione cada elemento do array a ela.",
                    explanation: "Precisamos visitar cada elemento exatamente uma vez, resultando em complexidade O(n)."
                },
                {
                    title: "4. Encontrar M√°ximo - O(n)",
                    description: "Encontre o maior elemento em um array.",
                    complexity: "O(n) - Tempo Linear",
                    template: `// Fun√ß√£o para encontrar o m√°ximo
int encontrar_maximo(int arr[], int tamanho) {
    // TODO: Encontre o maior elemento
    
}`,
                    solution: `int encontrar_maximo(int arr[], int tamanho) {
    if (tamanho <= 0) return -1;
    
    int maximo = arr[0];
    for (int i = 1; i < tamanho; i++) {
        if (arr[i] > maximo) {
            maximo = arr[i];
        }
    }
    return maximo;
}`,
                    testCases: [
                        { input: "[3, 7, 2, 9, 1]", expected: "9", description: "M√°ximo de [3,7,2,9,1]" },
                        { input: "[5]", expected: "5", description: "Array com um elemento" },
                        { input: "[-1, -5, -2]", expected: "-1", description: "Todos negativos" }
                    ],
                    hint: "Comece assumindo que o primeiro elemento √© o m√°ximo, ent√£o compare com os demais.",
                    explanation: "Devemos verificar todos os elementos para garantir que encontramos o m√°ximo, por isso O(n)."
                },
                {
                    title: "5. Contar Elementos - O(n)",
                    description: "Conte quantas vezes um valor espec√≠fico aparece no array.",
                    complexity: "O(n) - Tempo Linear",
                    template: `// Fun√ß√£o para contar ocorr√™ncias
int contar_elementos(int arr[], int tamanho, int valor) {
    // TODO: Conte quantas vezes o valor aparece
    
}`,
                    solution: `int contar_elementos(int arr[], int tamanho, int valor) {
    int contador = 0;
    for (int i = 0; i < tamanho; i++) {
        if (arr[i] == valor) {
            contador++;
        }
    }
    return contador;
}`,
                    testCases: [
                        { input: "([1, 2, 1, 3, 1], 1)", expected: "3", description: "Contar 1's em [1,2,1,3,1]" },
                        { input: "([5, 5, 5, 5], 5)", expected: "4", description: "Todos iguais" },
                        { input: "([1, 2, 3], 4)", expected: "0", description: "Valor n√£o existe" }
                    ],
                    hint: "Use um contador que inicia em 0 e incrementa a cada ocorr√™ncia encontrada.",
                    explanation: "Precisamos verificar cada elemento, resultando em complexidade linear O(n)."
                }
            ],
            intermediario: [
                {
                    title: "6. Busca Bin√°ria - O(log n)",
                    description: "Implemente busca bin√°ria em um array ordenado. Divida o problema pela metade a cada itera√ß√£o.",
                    complexity: "O(log n) - Tempo Logar√≠tmico",
                    template: `// Busca bin√°ria (array deve estar ordenado)
int busca_binaria(int arr[], int tamanho, int valor) {
    // TODO: Implemente busca bin√°ria
    
}`,
                    solution: `int busca_binaria(int arr[], int tamanho, int valor) {
    int inicio = 0;
    int fim = tamanho - 1;
    
    while (inicio <= fim) {
        int meio = inicio + (fim - inicio) / 2;
        
        if (arr[meio] == valor) {
            return meio;
        }
        
        if (arr[meio] < valor) {
            inicio = meio + 1;
        } else {
            fim = meio - 1;
        }
    }
    
    return -1; // N√£o encontrado
}`,
                    testCases: [
                        { input: "([1, 3, 5, 7, 9], 5)", expected: "2", description: "Buscar 5 em array ordenado" },
                        { input: "([1, 3, 5, 7, 9], 1)", expected: "0", description: "Primeiro elemento" },
                        { input: "([1, 3, 5, 7, 9], 10)", expected: "-1", description: "Valor n√£o existe" }
                    ],
                    hint: "Compare o elemento do meio com o valor procurado. Se for menor, busque na metade direita; se for maior, na esquerda.",
                    explanation: "A cada itera√ß√£o dividimos o espa√ßo de busca pela metade, resultando em O(log n)."
                },
                {
                    title: "7. Bubble Sort - O(n¬≤)",
                    description: "Implemente o algoritmo Bubble Sort para ordenar um array.",
                    complexity: "O(n¬≤) - Tempo Quadr√°tico",
                    template: `// Bubble Sort
void bubble_sort(int arr[], int tamanho) {
    // TODO: Implemente bubble sort
    
}`,
                    solution: `void bubble_sort(int arr[], int tamanho) {
    for (int i = 0; i < tamanho - 1; i++) {
        for (int j = 0; j < tamanho - i - 1; j++) {
            if (arr[j] > arr[j + 1]) {
                // Troca elementos
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}`,
                    testCases: [
                        { input: "[64, 34, 25, 12]", expected: "[12, 25, 34, 64]", description: "Array desordenado" },
                        { input: "[1, 2, 3, 4]", expected: "[1, 2, 3, 4]", description: "J√° ordenado" },
                        { input: "[5, 1, 4, 2, 8]", expected: "[1, 2, 4, 5, 8]", description: "Array m√©dio" }
                    ],
                    hint: "Use dois loops aninhados. O externo controla as passadas, o interno compara elementos adjacentes.",
                    explanation: "Dois loops aninhados resultam em O(n¬≤). Para cada elemento, comparamos com todos os outros."
                },
                {
                    title: "8. Selection Sort - O(n¬≤)",
                    description: "Encontre o menor elemento e coloque na posi√ß√£o correta a cada itera√ß√£o.",
                    complexity: "O(n¬≤) - Tempo Quadr√°tico",
                    template: `// Selection Sort
void selection_sort(int arr[], int tamanho) {
    // TODO: Implemente selection sort
    
}`,
                    solution: `void selection_sort(int arr[], int tamanho) {
    for (int i = 0; i < tamanho - 1; i++) {
        int min_idx = i;
        
        // Encontra o menor elemento
        for (int j = i + 1; j < tamanho; j++) {
            if (arr[j] < arr[min_idx]) {
                min_idx = j;
            }
        }
        
        // Troca se necess√°rio
        if (min_idx != i) {
            int temp = arr[i];
            arr[i] = arr[min_idx];
            arr[min_idx] = temp;
        }
    }
}`,
                    testCases: [
                        { input: "[64, 25, 12, 22, 11]", expected: "[11, 12, 22, 25, 64]", description: "Array padr√£o" },
                        { input: "[3, 1, 4, 1, 5]", expected: "[1, 1, 3, 4, 5]", description: "Com duplicados" },
                        { input: "[9, 8, 7, 6]", expected: "[6, 7, 8, 9]", description: "Ordem reversa" }
                    ],
                    hint: "Para cada posi√ß√£o, encontre o menor elemento restante e coloque na posi√ß√£o atual.",
                    explanation: "Para cada elemento, procuramos o m√≠nimo no resto do array, resultando em O(n¬≤)."
                },
                {
                    title: "9. Busca de Pares - O(n¬≤)",
                    description: "Encontre todos os pares de n√∫meros que somam um valor espec√≠fico.",
                    complexity: "O(n¬≤) - Tempo Quadr√°tico",
                    template: `// Buscar pares que somam um valor
int buscar_pares(int arr[], int tamanho, int soma_alvo) {
    // TODO: Conte quantos pares somam soma_alvo
    
}`,
                    solution: `int buscar_pares(int arr[], int tamanho, int soma_alvo) {
    int count = 0;
    
    for (int i = 0; i < tamanho - 1; i++) {
        for (int j = i + 1; j < tamanho; j++) {
            if (arr[i] + arr[j] == soma_alvo) {
                count++;
            }
        }
    }
    
    return count;
}`,
                    testCases: [
                        { input: "([1, 2, 3, 4], 5)", expected: "2", description: "Pares que somam 5: (1,4) e (2,3)" },
                        { input: "([1, 1, 1, 1], 2)", expected: "6", description: "M√∫ltiplos pares iguais" },
                        { input: "([1, 2, 3], 7)", expected: "0", description: "Nenhum par soma 7" }
                    ],
                    hint: "Use dois loops aninhados para verificar todos os pares poss√≠veis.",
                    explanation: "Verificamos todos os pares poss√≠veis com dois loops aninhados, resultando em O(n¬≤)."
                },
                {
                    title: "10. Duplicatas em Array - O(n¬≤)",
                    description: "Verifique se existem elementos duplicados no array.",
                    complexity: "O(n¬≤) - Tempo Quadr√°tico",
                    template: `// Verificar se h√° duplicatas
int tem_duplicatas(int arr[], int tamanho) {
    // TODO: Retorne 1 se h√° duplicatas, 0 caso contr√°rio
    
}`,
                    solution: `int tem_duplicatas(int arr[], int tamanho) {
    for (int i = 0; i < tamanho - 1; i++) {
        for (int j = i + 1; j < tamanho; j++) {
            if (arr[i] == arr[j]) {
                return 1; // Encontrou duplicata
            }
        }
    }
    return 0; // Sem duplicatas
}`,
                    testCases: [
                        { input: "[1, 2, 3, 1]", expected: "1", description: "Tem duplicata (1 aparece 2x)" },
                        { input: "[1, 2, 3, 4]", expected: "0", description: "Sem duplicatas" },
                        { input: "[5, 5]", expected: "1", description: "Array pequeno com duplicata" }
                    ],
                    hint: "Compare cada elemento com todos os elementos posteriores.",
                    explanation: "Comparamos cada elemento com todos os outros, resultando em complexidade O(n¬≤)."
                }
            ],
            avancado: [
                {
                    title: "11. Multiplication de Matrizes - O(n¬≥)",
                    description: "Multiplique duas matrizes quadradas usando o algoritmo cl√°ssico.",
                    complexity: "O(n¬≥) - Tempo C√∫bico",
                    template: `// Multiplica√ß√£o de matrizes n√ón
void multiplicar_matrizes(int A[][MAX], int B[][MAX], int C[][MAX], int n) {
    // TODO: C = A √ó B
    
}`,
                    solution: `void multiplicar_matrizes(int A[][MAX], int B[][MAX], int C[][MAX], int n) {
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < n; j++) {
            C[i][j] = 0;
            for (int k = 0; k < n; k++) {
                C[i][j] += A[i][k] * B[k][j];
            }
        }
    }
}`,
                    testCases: [
                        { input: "2x2 matrices", expected: "Resultado correto", description: "Multiplica√ß√£o b√°sica" },
                        { input: "3x3 matrices", expected: "Resultado correto", description: "Matriz maior" },
                        { input: "Matriz identidade", expected: "Matriz original", description: "Caso especial" }
                    ],
                    hint: "Use tr√™s loops aninhados: i para linhas de A, j para colunas de B, k para somar produtos.",
                    explanation: "Tr√™s loops aninhados para multiplica√ß√£o cl√°ssica resultam em O(n¬≥)."
                },
                {
                    title: "12. Torre de Han√≥i - O(2‚Åø)",
                    description: "Resolva o problema cl√°ssico da Torre de Han√≥i recursivamente.",
                    complexity: "O(2‚Åø) - Tempo Exponencial",
                    template: `// Torre de Han√≥i
int hanoi(int n, char origem, char destino, char auxiliar) {
    // TODO: Retorne n√∫mero de movimentos necess√°rios
    
}`,
                    solution: `int hanoi(int n, char origem, char destino, char auxiliar) {
    if (n == 1) {
        return 1; // Um movimento para disco √∫nico
    }
    
    // Mover n-1 discos para auxiliar
    int movimentos1 = hanoi(n-1, origem, auxiliar, destino);
    
    // Mover disco maior para destino (1 movimento)
    int movimento_maior = 1;
    
    // Mover n-1 discos do auxiliar para destino
    int movimentos2 = hanoi(n-1, auxiliar, destino, origem);
    
    return movimentos1 + movimento_maior + movimentos2;
}`,
                    testCases: [
                        { input: "n=1", expected: "1", description: "Um disco" },
                        { input: "n=2", expected: "3", description: "Dois discos" },
                        { input: "n=3", expected: "7", description: "Tr√™s discos" },
                        { input: "n=4", expected: "15", description: "Quatro discos" }
                    ],
                    hint: "Para mover n discos: mova n-1 para auxiliar, mova o maior para destino, mova n-1 do auxiliar para destino.",
                    explanation: "Cada disco dobra o n√∫mero de movimentos: T(n) = 2*T(n-1) + 1, resultando em O(2‚Åø)."
                },
                {
                    title: "13. Subsequ√™ncia Comum - O(n¬≥)",
                    description: "Encontre todas as subsequ√™ncias comuns entre duas strings (algoritmo ing√™nuo).",
                    complexity: "O(n¬≥) - Tempo C√∫bico",
                    template: `// Subsequ√™ncias comuns (vers√£o ing√™nua)
int contar_subsequencias_comuns(char str1[], char str2[], int len1, int len2) {
    // TODO: Conte subsequ√™ncias comuns
    
}`,
                    solution: `int contar_subsequencias_comuns(char str1[], char str2[], int len1, int len2) {
    int count = 0;
    
    // Gera todas subsequ√™ncias de str1
    for (int mask1 = 1; mask1 < (1 << len1); mask1++) {
        // Gera todas subsequ√™ncias de str2
        for (int mask2 = 1; mask2 < (1 << len2); mask2++) {
            // Compara subsequ√™ncias
            int i1 = 0, i2 = 0;
            int igual = 1;
            
            while (i1 < len1 && i2 < len2 && igual) {
                if ((mask1 & (1 << i1)) && (mask2 & (1 << i2))) {
                    if (str1[i1] != str2[i2]) {
                        igual = 0;
                    }
                }
                i1++; i2++;
            }
            
            if (igual) count++;
        }
    }
    
    return count;
}`,
                    testCases: [
                        { input: "(\"AB\", \"AB\")", expected: "3", description: "Strings iguais pequenas" },
                        { input: "(\"ABC\", \"AC\")", expected: "2", description: "Uma √© subsequ√™ncia" },
                        { input: "(\"XY\", \"ZW\")", expected: "0", description: "Sem caracteres comuns" }
                    ],
                    hint: "Para cada subsequ√™ncia de str1, verifique se existe uma igual em str2.",
                    explanation: "Geramos todas as 2‚Åø subsequ√™ncias e comparamos, resultando em complexidade c√∫bica."
                },
                {
                    title: "14. Subset Sum - O(2‚Åø)",
                    description: "Verifique se existe um subconjunto que soma um valor espec√≠fico.",
                    complexity: "O(2‚Åø) - Tempo Exponencial",
                    template: `// Subset Sum (for√ßa bruta)
int subset_sum(int arr[], int n, int soma_alvo) {
    // TODO: Retorne 1 se existe subconjunto que soma soma_alvo
    
}`,
                    solution: `int subset_sum(int arr[], int n, int soma_alvo) {
    // Testa todos os 2^n subconjuntos poss√≠veis
    for (int mask = 0; mask < (1 << n); mask++) {
        int soma_atual = 0;
        
        for (int i = 0; i < n; i++) {
            if (mask & (1 << i)) {
                soma_atual += arr[i];
            }
        }
        
        if (soma_atual == soma_alvo) {
            return 1; // Encontrou subconjunto
        }
    }
    
    return 0; // N√£o existe
}`,
                    testCases: [
                        { input: "([1, 2, 3], 4)", expected: "1", description: "1+3=4 ou s√≥ o 4" },
                        { input: "([1, 2, 3], 7)", expected: "0", description: "Soma imposs√≠vel" },
                        { input: "([5, 3, 2, 1], 6)", expected: "1", description: "5+1=6 ou 3+2+1=6" }
                    ],
                    hint: "Gere todos os 2‚Åø subconjuntos poss√≠veis e verifique se algum soma o valor alvo.",
                    explanation: "Testamos todos os 2‚Åø subconjuntos poss√≠veis, cada um em O(n), resultando em O(n*2‚Åø)."
                },
                {
                    title: "15. Permuta√ß√µes - O(n!)",
                    description: "Gere todas as permuta√ß√µes poss√≠veis de um array.",
                    complexity: "O(n!) - Tempo Fatorial",
                    template: `// Contar permuta√ß√µes
int contar_permutacoes(int arr[], int n) {
    // TODO: Retorne n√∫mero de permuta√ß√µes √∫nicas
    
}`,
                    solution: `int contar_permutacoes_rec(int arr[], int n, int inicio) {
    if (inicio == n - 1) {
        return 1; // Uma permuta√ß√£o completa
    }
    
    int total = 0;
    for (int i = inicio; i < n; i++) {
        // Troca elementos
        int temp = arr[inicio];
        arr[inicio] = arr[i];
        arr[i] = temp;
        
        // Recurs√£o
        total += contar_permutacoes_rec(arr, n, inicio + 1);
        
        // Desfaz troca (backtrack)
        temp = arr[inicio];
        arr[inicio] = arr[i];
        arr[i] = temp;
    }
    
    return total;
}

int contar_permutacoes(int arr[], int n) {
    return contar_permutacoes_rec(arr, n, 0);
}`,
                    testCases: [
                        { input: "[1, 2, 3]", expected: "6", description: "3! = 6 permuta√ß√µes" },
                        { input: "[1, 2]", expected: "2", description: "2! = 2 permuta√ß√µes" },
                        { input: "[1]", expected: "1", description: "1! = 1 permuta√ß√£o" }
                    ],
                    hint: "Para cada posi√ß√£o, tente todos os elementos restantes e recursivamente permute o resto.",
                    explanation: "Existem n! permuta√ß√µes poss√≠veis, e geramos todas recursivamente."
                }
            ]
        };

        // Inicializa√ß√£o da p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            initializeCodeEditor();
            initializeComplexityChart();
            loadExercise();
            startTimer();
            updateProgress();
        });

        // Inicializa o editor de c√≥digo
        function initializeCodeEditor() {
            editor = CodeMirror.fromTextArea(document.getElementById('codeInput'), {
                mode: 'text/x-csrc',
                theme: 'dracula',
                lineNumbers: true,
                autoCloseBrackets: true,
                matchBrackets: true,
                indentUnit: 4,
                lineWrapping: true
            });
            
            editor.setSize(null, 300);
        }

        // Inicializa o gr√°fico de complexidade
        function initializeComplexityChart() {
            const ctx = document.getElementById('complexityChart').getContext('2d');
            
            complexityChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1', '10', '100', '1K', '10K', '100K'],
                    datasets: [{
                        label: 'O(1)',
                        data: [1, 1, 1, 1, 1, 1],
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'O(log n)',
                        data: [1, 3.3, 6.6, 10, 13.3, 16.6],
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'O(n)',
                        data: [1, 10, 100, 1000, 10000, 100000],
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'O(n¬≤)',
                        data: [1, 100, 10000, 1000000, 100000000, 10000000000],
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            type: 'logarithmic',
                            display: true,
                            title: {
                                display: true,
                                text: 'Opera√ß√µes (escala log)'
                            }
                        },
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Tamanho da Entrada'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Compara√ß√£o de Complexidades'
                        }
                    }
                }
            });
        }

        // Seleciona n√≠vel de dificuldade
        function selectLevel(level) {
            currentLevel = level;
            currentExercise = 0;
            
            // Atualiza UI dos bot√µes
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.level-btn.${level}`).classList.add('active');
            
            loadExercise();
        }

        // Carrega exerc√≠cio atual
        function loadExercise() {
            const exercise = exercises[currentLevel][currentExercise];
            
            document.getElementById('exerciseTitle').textContent = exercise.title;
            document.getElementById('exerciseDescription').textContent = exercise.description;
            document.getElementById('complexityInfo').innerHTML = `
                <strong>Complexidade:</strong> ${exercise.complexity}<br>
                <strong>Explica√ß√£o:</strong> ${exercise.explanation}
            `;
            
            // Carrega template do c√≥digo
            editor.setValue(exercise.template);
            
            // Carrega casos de teste
            loadTestCases(exercise.testCases);
            
            // Limpa sa√≠da anterior
            document.getElementById('output').textContent = 'Resultado aparecer√° aqui...';
            document.getElementById('hintPanel').style.display = 'none';
            
            // Atualiza visualiza√ß√£o
            updateAlgorithmVisualization(exercise);
        }

        // Carrega casos de teste
        function loadTestCases(testCases) {
            const container = document.getElementById('testCases');
            container.innerHTML = '<h4>Casos de Teste:</h4>';
            
            testCases.forEach((testCase, index) => {
                const testDiv = document.createElement('div');
                testDiv.className = 'test-case';
                testDiv.innerHTML = `
                    <span>${testCase.description}</span>
                    <span>Entrada: ${testCase.input} ‚Üí Esperado: ${testCase.expected}</span>
                    <div class="test-status test-pending" id="test-${index}">?</div>
                `;
                container.appendChild(testDiv);
            });
        }

        // Executa o c√≥digo
        function runCode() {
            const code = editor.getValue();
            const output = document.getElementById('output');
            
            // Simula√ß√£o de execu√ß√£o (na realidade, seria necess√°rio um interpretador C)
            output.textContent = 'Executando c√≥digo...\n\n';
            
            setTimeout(() => {
                output.textContent += 'C√≥digo executado com sucesso!\n';
                output.textContent += 'Resultado: [simula√ß√£o de sa√≠da]\n';
                output.textContent += 'Tempo de execu√ß√£o: 0.001s\n';
                output.textContent += 'Mem√≥ria utilizada: 24 bytes\n';
                
                // Atualiza dados de performance
                updatePerformanceData();
            }, 1000);
        }

        // Testa a solu√ß√£o
        function testSolution() {
            const code = editor.getValue();
            const exercise = exercises[currentLevel][currentExercise];
            
            // Simula√ß√£o de teste (compara√ß√£o b√°sica com solu√ß√£o)
            const isCorrect = code.includes('for') || code.includes('while') || code.includes('return');
            
            exercise.testCases.forEach((testCase, index) => {
                const testElement = document.getElementById(`test-${index}`);
                
                setTimeout(() => {
                    if (isCorrect) {
                        testElement.className = 'test-status test-pass';
                        testElement.textContent = '‚úì';
                    } else {
                        testElement.className = 'test-status test-fail';
                        testElement.textContent = '‚úó';
                    }
                }, 500 * (index + 1));
            });
            
            setTimeout(() => {
                if (isCorrect) {
                    showAchievement();
                    completedExercises.add(`${currentLevel}-${currentExercise}`);
                    updateProgress();
                }
            }, 2000);
        }

        // Mostra dica
        function showHint() {
            const exercise = exercises[currentLevel][currentExercise];
            const hintPanel = document.getElementById('hintPanel');
            
            hintPanel.innerHTML = `<strong>üí° Dica:</strong> ${exercise.hint}`;
            hintPanel.style.display = 'block';
        }

        // Pr√≥ximo exerc√≠cio
        function nextExercise() {
            const maxExercises = exercises[currentLevel].length;
            
            if (currentExercise < maxExercises - 1) {
                currentExercise++;
                loadExercise();
            } else {
                // Passou do √∫ltimo exerc√≠cio do n√≠vel
                alert(`Parab√©ns! Voc√™ completou todos os exerc√≠cios do n√≠vel ${currentLevel}!`);
                
                // Avan√ßa para pr√≥ximo n√≠vel se poss√≠vel
                if (currentLevel === 'iniciante') {
                    selectLevel('intermediario');
                } else if (currentLevel === 'intermediario') {
                    selectLevel('avancado');
                } else {
                    alert('üéâ Parab√©ns! Voc√™ completou todos os exerc√≠cios!');
                }
            }
        }

        // Mostra conquista
        function showAchievement() {
            const achievement = document.createElement('div');
            achievement.className = 'achievement';
            achievement.textContent = 'üéâ Exerc√≠cio Completado! Excelente trabalho!';
            
            document.querySelector('.container').insertBefore(
                achievement, 
                document.querySelector('.exercise-container')
            );
            
            setTimeout(() => {
                achievement.remove();
            }, 3000);
        }

        // Atualiza progresso
        function updateProgress() {
            const totalExercises = Object.values(exercises).reduce((sum, level) => sum + level.length, 0);
            const completed = completedExercises.size;
            const percentage = (completed / totalExercises) * 100;
            
            document.getElementById('overallProgress').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = `${completed}/${totalExercises} exerc√≠cios completados`;
        }

        // Timer
        function startTimer() {
            setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                
                document.getElementById('timer').textContent = 
                    `‚è±Ô∏è Tempo: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Atualiza dados de performance
        function updatePerformanceData() {
            const performanceDiv = document.getElementById('performanceData');
            const exercise = exercises[currentLevel][currentExercise];
            
            performanceDiv.innerHTML = `
                <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 5px 0;">
                    <strong>Exerc√≠cio Atual:</strong> ${exercise.complexity}
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 5px 0;">
                    <strong>Tempo Simulado:</strong> 0.001s
                </div>
                <div style="background: #e8f0ff; padding: 10px; border-radius: 5px; margin: 5px 0;">
                    <strong>Mem√≥ria:</strong> 24 bytes
                </div>
            `;
        }

        // Atualiza visualiza√ß√£o do algoritmo
        function updateAlgorithmVisualization(exercise) {
            const vizDiv = document.getElementById('algorithmVisualization');
            
            let visualization = '';
            
            if (exercise.complexity.includes('O(1)')) {
                visualization = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="background: #27ae60; color: white; padding: 10px; border-radius: 50%; width: 60px; height: 60px; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                            1
                        </div>
                        <p style="margin-top: 10px;">Acesso direto - sempre 1 opera√ß√£o</p>
                    </div>
                `;
            } else if (exercise.complexity.includes('O(n)')) {
                visualization = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="display: flex; gap: 5px; justify-content: center; margin-bottom: 10px;">
                            ${Array.from({length: 8}, (_, i) => 
                                `<div style="background: #3498db; color: white; padding: 8px; border-radius: 3px; width: 30px; text-align: center;">${i+1}</div>`
                            ).join('')}
                        </div>
                        <p>Busca linear - verifica cada elemento</p>
                    </div>
                `;
            } else if (exercise.complexity.includes('O(log n)')) {
                visualization = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="display: flex; gap: 5px; justify-content: center; margin-bottom: 10px;">
                            ${Array.from({length: 8}, (_, i) => {
                                const isMiddle = i === 3 || i === 1 || i === 5;
                                return `<div style="background: ${isMiddle ? '#e74c3c' : '#bdc3c7'}; color: white; padding: 8px; border-radius: 3px; width: 30px; text-align: center;">${i+1}</div>`;
                            }).join('')}
                        </div>
                        <p>Busca bin√°ria - divide pela metade</p>
                    </div>
                `;
            } else if (exercise.complexity.includes('O(n¬≤)')) {
                visualization = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px; max-width: 120px; margin: 0 auto 10px;">
                            ${Array.from({length: 16}, (_, i) => 
                                `<div style="background: #f39c12; width: 25px; height: 25px; border-radius: 2px;"></div>`
                            ).join('')}
                        </div>
                        <p>Algoritmo quadr√°tico - n √ó n opera√ß√µes</p>
                    </div>
                `;
            }
            
            vizDiv.innerHTML = visualization;
        }
    </script>
</body>
</html>
